(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[760],{2067:e=>{"use strict";e.exports=require("node:async_hooks")},6195:e=>{"use strict";e.exports=require("node:buffer")},2122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ComponentMod:()=>P,default:()=>S});var a={};r.r(a),r.d(a,{POST:()=>d,runtime:()=>c});var s={};r.r(s),r.d(s,{headerHooks:()=>m,originalPathname:()=>R,patchFetch:()=>E,requestAsyncStorage:()=>f,routeModule:()=>h,serverHooks:()=>y,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>w});var n=r(7875),o=r(8381),i=r(2251),p=r(9845);let c="edge";async function u(e){try{let t=await fetch(e);if(!t.ok)throw Error(`HTTP error! status: ${t.status}`);let r=await t.text();return function(e){let t="</body>",r=e.indexOf("<body"),a=e.indexOf(t,r);return -1!==r&&-1!==a?e.slice(r,a+t.length).replace(/<script[\s\S]*?<\/script>/gi,"").replace(/<style[\s\S]*?<\/style>/gi,"").replace(/<[^>]+>/g,"").replace(/\s+/g," ").trim().slice(0,5e3):""}(r)}catch(t){return console.error(`Error fetching URL ${e}:`,t),""}}let l=new Map;async function d(e){let t=new URL(e.url).searchParams,r=t.get("urls")?.split(",")??[];if(0===r.length)return new Response(JSON.stringify({error:"Please provide URLs to scrape"}),{status:400,headers:{"Content-Type":"application/json"}});try{let e=r.map(async e=>{if(l.has(e))return l.get(e);let t=await u(e);return l.set(e,t),t}),t=(await Promise.all(e)).map((e,t)=>`${r[t]}
Website data: ${e}`).join("\n\n");return new Response(t,{status:200,headers:{"Content-Type":"text/plain"}})}catch(e){return console.error("Scraping error:",e),new Response(JSON.stringify({error:`Failed to scrape the pages: ${e}`}),{status:500,headers:{"Content-Type":"application/json"}})}}let h=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/scrape/route",pathname:"/api/scrape",filename:"route",bundlePath:"app/api/scrape/route"},resolvedPagePath:"/home/pc-1827/Desktop/practice/assignments/blubeeai_assignment/omniplex/src/app/api/scrape/route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:f,staticGenerationAsyncStorage:g,serverHooks:y,headerHooks:m,staticGenerationBailout:w}=h,R="/api/scrape/route";function E(){return(0,p.XH)({serverHooks:y,staticGenerationAsyncStorage:g})}let P=s,S=n.a.wrap(h)}},e=>{var t=t=>e(e.s=t);e.O(0,[541],()=>t(2122));var r=e.O();(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/scrape/route"]=r}]);
//# sourceMappingURL=route.js.map